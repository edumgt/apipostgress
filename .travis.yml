language: java
sudo: true
dist: trusty
jdk: oraclejdk8

services:
- postgresql




addons:
  sonarcloud:
    organization: "maxiplux-github" # the key of the org you chose at step #3
    token:
      secure: $SONAR_KEY # encrypted value of your token

  hosts:
  - postgres
  apt:
    packages:
    - oracle-java8-installer
before_install:
- chmod a+x ./mvnw

deploy:
  provider: heroku
  api_key:
    secure: $HEROKU_API_KEY
  app: apipostgress

script:
#- ./mvnv verify -B
#- ./mvnw  verify
- ./mvnw clean verify install -B
- sonar-scanner


#sudo: required
#services:
#- docker

